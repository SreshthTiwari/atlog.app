<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../styling/common.css" />
    <!-- <link rel="stylesheet" href="../styling/student.css" /> -->
    <link rel="stylesheet" href="../styling/help.css" />
    <link
      href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css"
      rel="stylesheet"
    />
    <script
      type="text/javascript"
      src="https://unpkg.com/xlsx@0.15.1/dist/xlsx.full.min.js"
    ></script>
    <link rel="icon" type="image/x-icon" href="../images/logo.png" />
    <title>@Log - Help</title>
  </head>
  <body>
    <nav class="sidebar">
      <header>
        <div class="image-text">
          <span class="image">
            <img src="../images/logoo.png" alt="" />
          </span>

          <div class="text logo-text">
            <span class="name">Admin Page</span>
            <!-- <span class="profession">Web developer</span> -->
          </div>
        </div>

        <!-- <i class="bx bx-chevron-right toggle"></i> -->
      </header>

      <div class="menu-bar">
        <div class="menu">
          <ul class="menu-links">
            <li class="nav-link">
              <a href="../pages/home.html">
                <i class="bx bx-home-alt icon"></i>
                <span class="text nav-text">Dashboard</span>
              </a>
            </li>

            <li class="nav-link">
              <a href="../pages/buses.html">
                <i class="bx bxs-bus-school icon"></i>
                <span class="text nav-text">Buses Info</span>
              </a>
            </li>

            <li class="nav-link">
              <a href="../pages/students.html">
                <i class="bx bx-bar-chart-alt-2 icon"></i>
                <span class="text nav-text">Student Info</span>
              </a>
            </li>

            <li class="nav-link">
              <a href="../pages/carer.html">
                <i class="bx bx-list-ul icon"></i>
                <span class="text nav-text">Carer Info</span>
              </a>
            </li>

            <li class="nav-link">
              <a href="#">
                <i class="bx bx-question-mark icon"></i>
                <span class="text nav-text">Help</span>
              </a>
            </li>
          </ul>
        </div>

        <div class="bottom-content">
          <li class="logoutt">
            <a href="#" id="logout">
              <i class="bx bx-log-out icon"></i>
              <span class="text nav-text logouttext">Logout</span>
            </a>
          </li>
        </div>
      </div>
    </nav>
    <div class="home">
      <div class="up">
        <div class="text">
          <h1>Help Page</h1>
          <h2>View instructional videos, FAQs, and contact developers</h2>
        </div>
        <div class="icon">
          <i class="bx bx-message-square-dots"></i>
          <!-- <div class="nobuses"> -->
          <!-- <h1>30</h1> -->
          <!-- <h2>Carers</h2> -->
          <!-- </div> -->
        </div>
      </div>
      <div class="warning">
        <h1>Your device width is too low</h1>
        <h2>Kindly login through a PC or another device</h2>
      </div>
      <div class="content">
        <!-- <h1>This page is currently being worked on</h1>
        <h3>
          We're working on the most helpful videos, and also a reliable contact
          form -->
        <!-- </h3> -->
        <div class="container">
          <div class="wrapper">
            <div class="company-info">
              <h1>Contact Us</h1>
              <h3>Use this form to tell us about any issue you have</h3>
            </div>
            <div class="contact">
              <form id="contactForm">
                <p>
                  <label>Name</label>
                  <input type="text" name="name" id="name" required />
                </p>
                <p>
                  <label>School</label>
                  <input type="text" name="company" id="company" />
                </p>
                <p class="full">
                  <label>Email Address</label>
                  <input type="email" name="email" id="email" required />
                </p>
                <!-- <p>
                  <label>Phone Number</label>
                  <input type="text" name="phone" id="phone" />
                </p> -->
                <p class="full">
                  <label>Message</label>
                  <textarea name="message" rows="5" id="message"></textarea>
                </p>
                <p class="full">
                  <button type="submit">Submit</button>
                </p>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="faqs">
        <h2>Frequently Asked Questions</h2>
        <div class="accordion">
          <div class="accordion-item">
            <a>Do I have to submit my information while filling the form?</a>
            <div class="faqcontent">
              <p>
                No, while filling out the form to submit your idea, your name or
                your grade isn't required. However, it is a good idea to include
                this information.
              </p>
            </div>
          </div>
          <div class="accordion-item">
            <a>How do I submit my idea?</a>
            <div class="faqcontent">
              <p>
                The Interface of this website is designed to deliver a
                user-friendly experience. In order to submit an idea, all you
                have to do is click on the button on the top right of the screen
                in order to expand the side-bar. After that, click on the 'Send
                Idea' button, which will redirect you to the form page. Fill out
                the form, and then click 'send'.
              </p>
            </div>
          </div>
          <div class="accordion-item">
            <a>Can I use this on a Mobile Device?</a>
            <div class="faqcontent">
              <p>
                Yes, this website is fully responsive for both Mobile and Tablet
                devices. The user will get the same, interactive experience on
                all kinds of devices.
              </p>
            </div>
          </div>
          <div class="accordion-item">
            <a>Where do my ideas get submitted?</a>
            <div class="faqcontent">
              <p>
                After you submit the form, your idea is directly sent to a
                Google Account of the Student Council, where all ideas are
                consolidated into a single spreadsheet. This spreadsheet is read
                every week by a member of the council.
              </p>
            </div>
          </div>
          <div class="accordion-item">
            <a>How do I report a problem in the website?</a>
            <div class="faqcontent">
              <p>
                If you encounter a bug or problem while using the website, you
                can take a screenshot or recording of it, and send it to the
                developer - whose socials are available in the bottom of the
                website.
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="footer">
        <h3>@Log</h3>
        <p>Page End</p>
      </div>
    </div>
    <script>
      const items = document.querySelectorAll(".accordion a");

      function toggleAccordion() {
        this.classList.toggle("active");
        this.nextElementSibling.classList.toggle("active");
      }

      items.forEach((item) => item.addEventListener("click", toggleAccordion));
    </script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="module">
      import {
        getAuth,
        signOut,
        onAuthStateChanged,
      } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-auth.js";

      import {
        ref,
        onValue,
      } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-database.js";
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-app.js";
      import {
        getDatabase,
        set,
        get,
        child,
        update,
        remove,
      } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-database.js";
      const firebaseConfig = {
        apiKey: "AIzaSyAKQ7x0iXdc9zPASPl8fe0Zy3w977sslwQ",
        authDomain: "schooltransportthingtest.firebaseapp.com",
        databaseURL:
          "https://schooltransportthingtest-default-rtdb.firebaseio.com",
        projectId: "schooltransportthingtest",
        storageBucket: "schooltransportthingtest.appspot.com",
        messagingSenderId: "1022909830472",
        appId: "1:1022909830472:web:14e6c0005a15bcfbed4f7d",
        measurementId: "G-9477HH598G",
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);
      const auth = getAuth();

      // Reference messages collection
      var dbref = ref(db);

      // Listen for form submit
      document
        .getElementById("contactForm")
        .addEventListener("submit", submitForm);

      // Submit form
      function submitForm(e) {
        e.preventDefault();

        // Get values
        var name = getInputVal("name");
        var company = getInputVal("company");
        var email = getInputVal("email");
        var message = getInputVal("message");

        // Save message
        saveMessage(name, company, email, message);

        // Show alert
        // document.querySelector(".alert").style.display = "block";
        alert("Successfully Submitted Form!");

        document.getElementById("contactForm").reset();
      }

      // Function to get get form values
      function getInputVal(id) {
        return document.getElementById(id).value;
      }

      // Save message to firebase
      function saveMessage(name, company = "r", email, message) {
        console.log("Messages/".concat(company).concat("/"));
        set(
          ref(
            db,
            "Messages/"
              .concat((Math.random() + 1).toString(36).substring(9))
              .concat("/")
              .concat(company)
              .concat("/")
          ),
          {
            name: name,
            company: company,
            email: email,
            message: message,
          }
        );
      }

      //log out user if not signed in
      onAuthStateChanged(auth, (user) => {
        if (user) {
          console.log("user signed in");
        } else {
          console.log("user not signed in");
          window.location.href = "../index.html";
        }
      });
    </script>
  </body>
</html>
